<!DOCTYPE HTML>
<html lang="en">
<head>
<title>KeyHistory - Syntax &amp; Usage | AutoHotkey v2</title>
<meta name="description" content="The KeyHistory function displays script info and a history of the most recent keystrokes and mouse clicks." />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link href="../static/theme.css" rel="stylesheet" type="text/css" />
<script src="../static/content.js" type="text/javascript"></script>
</head>
<body>

<h1>KeyHistory</h1>

<p>Displays script info and a history of the most recent keystrokes and mouse clicks.</p>

<pre class="Syntax"><span class="func">KeyHistory</span> <span class="optional">MaxEvents</span></pre>
<h2 id="Parameters">Parameters</h2>
<dl>

  <dt>MaxEvents</dt>
  <dd>
    <p>Type: <a href="../Concepts.htm#numbers">Integer</a></p>
    <p>If omitted, the script's <a href="../Program.htm#main-window">main window</a> will be shown, equivalent to selecting the "View-&gt;Key history" menu item. Otherwise, specify the maximum number of keyboard and mouse events that can be recorded for display in the window (limit 500). The key history is also reset, but the main window is not shown or refreshed. Specify 0 to disable key history entirely.</p>
  </dd>

</dl>

<h2 id="Remarks">Remarks</h2>
<p>If KeyHistory is not used, the default setting is 40.</p>
<p>To disable key history, use the following:</p>
<pre>KeyHistory 0</pre>
<p>This feature is intended to help <a href="../Scripts.htm#debug">debug scripts and hotkeys</a>. It can also be used to detect the scan code of a non-standard keyboard key using the steps described at the bottom of the <a href="../KeyList.htm#SpecialKeys">key list</a> page (knowing the scan code allows such a key to be made into a hotkey).</p>
<p>The virtual key codes (VK) of the wheel events (WheelDown, WheelUp, WheelLeft, and WheelRight) are placeholder values that do not have any meaning outside of AutoHotkey. Also, the scan code for wheel events is actually the number of notches by which the wheel was turned (typically 1).</p>
<p>If the script does not have the <a href="InstallKeybdHook.htm">keyboard hook</a> installed, the KeyHistory window will display only the keyboard events generated by the script itself (i.e. not the user's).  If the script does not have the  <a href="InstallMouseHook.htm">mouse hook</a> installed, mouse button events will not be shown. You can find out if your script uses either hook via "View-&gt;Key History" in the <a href="../Program.htm#main-window">script's main window</a> (accessible via "Open" in the <a href="../Program.htm#tray-icon">tray icon</a>). You can force the hooks to be installed by adding either or both of the following lines to the script:</p>
<pre><a href="InstallKeybdHook.htm">InstallKeybdHook</a>
<a href="InstallMouseHook.htm">InstallMouseHook</a></pre>
<p>Because each keystroke or mouse click consists of a down-event and an up-event, KeyHistory displays only half as many "complete events" as specified by <em>MaxEvents</em>. For example, if the script calls <code>KeyHistory 50</code>, up to 25 keystrokes and mouse clicks will be displayed.</p>

<h2 id="Related">Related</h2>
<p><a href="InstallKeybdHook.htm">InstallKeybdHook</a>, <a href="InstallMouseHook.htm">InstallMouseHook</a>, <a href="ListHotkeys.htm">ListHotkeys</a>, <a href="ListLines.htm">ListLines</a>, <a href="ListVars.htm">ListVars</a>, <a href="GetKeyState.htm">GetKeyState</a>, <a href="KeyWait.htm">KeyWait</a>, <a href="../Variables.htm#PriorKey">A_PriorKey</a></p>

<h2 id="Examples">Examples</h2>

<div class="ex" id="ExBasic">
<p><a class="ex_number" href="#ExBasic"></a> Displays the history info in a window.</p>
<pre>KeyHistory</pre>
</div>

<div class="ex" id="ExMaxEvents">
<p><a class="ex_number" href="#ExMaxEvents"></a> Causes KeyHistory to display the last 100 instead 40 keyboard and mouse events.</p>
<pre>KeyHistory 100</pre>
</div>

<div class="ex" id="ExDisable">
<p><a class="ex_number" href="#ExDisable"></a> Disables key history entirely.</p>
<pre>KeyHistory 0</pre>
</div>

</body>
</html>

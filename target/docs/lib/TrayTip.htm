<!DOCTYPE HTML>
<html lang="ja">
<head>
<title>TrayTip - 構文と使用法｜AutoHotkey v2</title>
<meta name="description" content="TrayTip関数は、トレイアイコンの近くにバルーンメッセージウィンドウを作成します。Windows 10の場合、代わりにトースト通知が表示されることがあります。" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link href="../static/theme.css" rel="stylesheet" type="text/css" />
<script src="../static/content.js" type="text/javascript"></script>
<style type="text/css">
  .sized1 {
    width: 20em;
  }
  .sized2 {
    width: 4em;
  }
</style>
</head>
<body>

<h1>TrayTip</h1>

<p><a href="../Program.htm#tray-icon">トレイアイコン</a>の近くにバルーンメッセージウィンドウを作成する。Windows 10の場合、代わりにトースト通知が表示されることがあります。</p>

<pre class="Syntax"><span class="func">TrayTip</span> <span class="optional">Text, Title, Options</span></pre>
<h2 id="Parameters">パラメータ</h2>
<dl>

  <dt>Text</dt>
  <dd>
    <p>型：<a href="../Concepts.htm#strings">文字列</a></p>
    <p>表示するメッセージ。最初の265文字だけが表示されます。</p>
    <p>キャリッジリターン(`r)またはラインフィード(`n)を使って複数行のテキストを作成することができる。事例：<code>Line1`nLine2</code>.</p>
    <p><em>Text</em>が長い場合、<a href="../Scripts.htm#continuation">継続セクション</a>によっていくつかの短い行に分割することができ、読みやすさと保守性を向上させることができるかもしれません。</p>
    <p><em>Text</em>を空白にすることで、タイトルだけのウィンドウを表示することができる。</p>
  </dd>

  <dt>タイトル</dt>
  <dd>
    <p>型：<a href="../Concepts.htm#strings">文字列</a></p>
    <p>ウィンドウのタイトル。最初の73文字のみが表示されます。</p>
    <p><em>Title</em>が空白の場合、タイトル行はウィンドウから完全に省略され、縦に短くなる。</p>
  </dd>

  <dt>Options</dt>
  <dd>
    <p>型：<a href="../Concepts.htm#strings">文字列</a>または<a href="../Concepts.htm#numbers">整数</a></p>
    <p>整数値（加算またはビット単位のORによる組み合わせ）または、少なくとも1つのスペースまたはタブで区切られた、0個以上の大文字小文字を区別しないオプションの文字列。また、1つ以上の数値オプションを文字列に含めることができます。</p>
    <table class="info">
      <tr>
        <th class="sized1">機能</th>
        <th class="sized2 right">Dec</th>
        <th class="sized2 right">Hex</th>
        <th>String</th>
      </tr>
      <tr>
        <td>Info icon</td>
        <td class="right">1</td>
        <td class="right">0x1</td>
        <td><code>Iconi</code></td>
      </tr>
      <tr>
        <td>Warning icon</td>
        <td class="right">2</td>
        <td class="right">0x2</td>
        <td><code>Icon!</code></td>
      </tr>
      <tr>
        <td>Error icon</td>
        <td class="right">3</td>
        <td class="right">0x3</td>
        <td><code>Iconx</code></td>
      </tr>
      <tr>
        <td><a href="TraySetIcon.htm">Tray icon</a></td>
        <td class="right">4</td>
        <td class="right">0x4</td>
        <td>N/A</td>
      </tr>
      <tr>
        <td>通知音を鳴らさない。</td>
        <td class="right">16</td>
        <td class="right">0x10</td>
        <td><code>Mute</code></td>
      </tr>
      <tr>
        <td>アイコンの大きいバージョンを使用してください。</td>
        <td class="right">32</td>
        <td class="right">0x20</td>
        <td>N/A</td>
      </tr>
    </table>
    <p>省略された場合、デフォルトは0となり、アイコンは表示されない。また、バルーンウィンドウに<em>タイトル</em>がない場合、アイコンは表示されません（Windows 10のトースト通知には適用されません）。</p>
    <p>Windows10では、「トレイアイコン」オプション(4)を省略しても、通常は小さなトレイアイコンが表示され、このオプションを指定すると、通知にプログラム名が表示される場合があります。</p>
    </dd>

</dl>

<h2 id="To_Hide_the_Window">ウィンドウを隠すには</h2>
<p>TrayTipバルーンウィンドウを隠すには、<em>Text</em>と <em>Title</em>の両方を省略します。事例：</p>
<pre>TrayTip</pre>
<p>Windows 10のトースト通知を非表示にするには、<a href="../Program.htm#tray-icon">トレイアイコン</a>を一時的に削除します。事例：</p>
<pre>TrayTip "#1", "This is TrayTip #1"
Sleep 3000   <em>; Let it display for 3 seconds.</em>
HideTrayTip
TrayTip "#2", "This is the second notification."
Sleep 3000

<em id="Hide">; Copy this function into your script to use it.</em>
HideTrayTip() {
    TrayTip  <em>; Attempt to hide it the normal way.</em>
    if SubStr(A_OSVersion,1,3) = "10." {
        A_IconHidden := true
        Sleep 200  <em>; It may be necessary to adjust this sleep.</em>
        A_IconHidden := false
    }
}
</pre>
<p>少なくともある報告書によれば、これは必ずしもうまくいくとは限らない。</p>

<h2 id="Remarks">備考</h2>
<p>Windows10では、TrayTipウィンドウは通常このように表示される：</p>
<img src="../static/dlg_traytip.png" alt="TrayTip" />
<p id="Windows10"><strong>Windows 10</strong>では、デフォルトですべてのバルーンウィンドウがトースト通知に置き換えられる（グループポリシーで上書き可能）。TrayTipを複数回呼び出すと、通常、各通知が最後の通知を置き換えるのではなく、複数の通知が「キュー」に入れられます。</p>
<p>TrayTipは、スクリプトに<a href="../Program.htm#tray-icon">トレイアイコン</a>がない場合（<a href="_NoTrayIcon.htm">#NoTrayIcon</a>または<code><a href="../Variables.htm#IconHidden">A_IconHidden</a>:=trueを</code>使用）には効果がありません。また、以下のREG_DWORD値が存在し、0に設定されている場合、TrayTipは効果を発揮しません：</p>
<pre>HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced &gt;&gt; EnableBalloonTips</pre>
<p>関連して、ユーザーがスクリプトの<a href="../Program.htm#tray-icon">トレイアイコン</a>にマウスを置くと、ツールチップが表示される。このツールチップの内容は、以下の方法で変更できる：<code><a href="../Variables.htm#IconTip">A_IconTip</a> := "My New Text"</code>.</p>

<h2 id="Related">関連</h2>
<p><a href="ToolTip.htm">ToolTip</a>, <a href="SetTimer.htm">SetTimer</a>, <a href="Menu.htm">Menu object</a>, <a href="MsgBox.htm">MsgBox</a>, <a href="InputBox.htm">InputBox</a>, <a href="FileSelect.htm">FileSelect</a>, <a href="DirSelect.htm">DirSelect</a></p>

<h2 id="Examples">例</h2>
<div class="ex" id="ExBasic">
<p><a class="ex_number" href="#ExBasic"></a> 通知音を再生せずに、<a href="../Program.htm#tray-icon">トレイアイコン</a>の近くに20秒間、複数行のバルーンメッセージまたはトースト通知を表示します。また、タイトルがあり、情報アイコンが含まれている。</p>
<pre>TrayTip "Multiline`nText", "My Title", "Iconi Mute"</pre>
</div>

<div class="ex" id="ExDisplayTime">
<p><a class="ex_number" href="#ExDisplayTime"></a> スリープ（現在のスレッドを停止させる）を使うことなく、表示時間をより正確にコントロールできる。Windows 10の場合は、HideTrayTip関数の定義を<a href="#Hide">上記</a>で定義したものに置き換えてください。</p>
<pre>TrayTip "This will be displayed for 5 seconds.", "Timed TrayTip"
SetTimer HideTrayTip, -5000

HideTrayTip() {
    TrayTip
}
</pre>
</div>

<div class="ex" id="ExPermanent">
<p><a class="ex_number" href="#ExPermanent"></a> タイマーで定期的に更新することにより、TrayTipを永続的に表示します。なお、<a href="#Windows10">上記</a>の理由により、ウィンドウズ10ではおそらくうまくいかないだろう。</p>
<pre>SetTimer RefreshTrayTip, 1000
RefreshTrayTip  <em>; Call it once to get it started right away.</em>

RefreshTrayTip()
{
    TrayTip "This is a more permanent TrayTip.", "Refreshed TrayTip", "Mute"
}</pre>
</div>

</body>
</html>
